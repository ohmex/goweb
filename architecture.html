<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go Web MVC Architecture Diagram</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1em;
        }
        .content {
            padding: 40px;
        }
        .architecture-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        .layer {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            border-left: 5px solid #3498db;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        .layer h3 {
            margin: 0 0 20px 0;
            color: #2c3e50;
            font-size: 1.4em;
            display: flex;
            align-items: center;
        }
        .layer h3::before {
            content: '';
            width: 20px;
            height: 20px;
            background: #3498db;
            border-radius: 50%;
            margin-right: 10px;
        }
        .component {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .component:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .component h4 {
            margin: 0 0 8px 0;
            color: #495057;
            font-size: 1.1em;
        }
        .component p {
            margin: 0;
            color: #6c757d;
            font-size: 0.9em;
            line-height: 1.4;
        }
        .workflow-section {
            margin-top: 40px;
        }
        .workflow-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        .workflow {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            padding: 25px;
            position: relative;
            overflow: hidden;
        }
        .workflow::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255,0.1);
            clip-path: polygon(0 0, 100% 0, 100% 70%, 0 100%);
        }
        .workflow h3 {
            margin: 0 0 15px 0;
            position: relative;
            z-index: 1;
        }
        .workflow ol {
            margin: 0;
            padding-left: 20px;
            position: relative;
            z-index: 1;
        }
        .workflow li {
            margin: 8px 0;
            line-height: 1.5;
        }
        .libraries-section {
            margin-top: 40px;
        }
        .libraries-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .library-category {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-top: 4px solid #28a745;
        }
        .library-category h4 {
            margin: 0 0 15px 0;
            color: #2c3e50;
            font-size: 1.2em;
        }
        .library-item {
            background: white;
            border-radius: 6px;
            padding: 10px;
            margin: 8px 0;
            border-left: 3px solid #28a745;
            font-size: 0.9em;
        }
        .library-item strong {
            color: #495057;
        }
        .library-item span {
            color: #6c757d;
            font-size: 0.8em;
        }
        .security-section {
            margin-top: 40px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border-radius: 12px;
            padding: 25px;
        }
        .security-section h3 {
            margin: 0 0 20px 0;
        }
        .security-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        .security-item {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        .security-item h4 {
            margin: 0 0 8px 0;
            font-size: 1.1em;
        }
        .security-item p {
            margin: 0;
            font-size: 0.9em;
            opacity: 0.9;
        }
        .data-flow {
            margin-top: 40px;
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
        }
        .data-flow h3 {
            margin: 0 0 20px 0;
            color: #2c3e50;
        }
        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }
        .flow-step {
            background: white;
            border: 2px solid #3498db;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-weight: bold;
            color: #3498db;
            position: relative;
        }
        .flow-step::after {
            content: '→';
            position: absolute;
            right: -25px;
            font-size: 1.5em;
            color: #3498db;
        }
        .flow-step:last-child::after {
            display: none;
        }
        @media (max-width: 768px) {
            .flow-diagram {
                flex-direction: column;
            }
            .flow-step::after {
                content: '↓';
                right: 50%;
                top: 100%;
                transform: translateX(50%);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Go Web MVC Architecture</h1>
            <p>Comprehensive Architecture Diagram with Framework Elements, Workflows & Libraries</p>
        </div>
        
        <div class="content">
            <!-- Architecture Layers -->
            <div class="architecture-grid">
                <div class="layer">
                    <h3>Presentation Layer</h3>
                    <div class="component">
                        <h4>Echo Framework</h4>
                        <p>High-performance HTTP web framework with middleware support, routing, and request handling</p>
                    </div>
                    <div class="component">
                        <h4>Swagger Documentation</h4>
                        <p>Auto-generated API documentation with interactive testing interface</p>
                    </div>
                    <div class="component">
                        <h4>Static File Serving</h4>
                        <p>Static file hosting for documentation and assets</p>
                    </div>
                </div>

                <div class="layer">
                    <h3>Application Layer</h3>
                    <div class="component">
                        <h4>Handlers</h4>
                        <p>HTTP request handlers implementing CRUD operations for resources (User, Post, Role, Domain)</p>
                    </div>
                    <div class="component">
                        <h4>Routes</h4>
                        <p>RESTful API route configuration with middleware chaining</p>
                    </div>
                    <div class="component">
                        <h4>Interceptors</h4>
                        <p>Middleware for authentication, authorization, and performance monitoring</p>
                    </div>
                </div>

                <div class="layer">
                    <h3>Business Logic Layer</h3>
                    <div class="component">
                        <h4>Services</h4>
                        <p>Business logic implementation for authentication, token management, and domain operations</p>
                    </div>
                    <div class="component">
                        <h4>Token Service</h4>
                        <p>JWT token generation, validation, and refresh token management</p>
                    </div>
                    <div class="component">
                        <h4>Validation</h4>
                        <p>Request validation using ozzo-validation library</p>
                    </div>
                </div>

                <div class="layer">
                    <h3>Data Access Layer</h3>
                    <div class="component">
                        <h4>GORM</h4>
                        <p>Object-Relational Mapping with support for MySQL, PostgreSQL, and SQLite</p>
                    </div>
                    <div class="component">
                        <h4>Database Migrations</h4>
                        <p>Schema management and data seeding with version control</p>
                    </div>
                    <div class="component">
                        <h4>Redis Cache</h4>
                        <p>In-memory caching for session management and token storage</p>
                    </div>
                </div>
            </div>

            <!-- Security Architecture -->
            <div class="security-section">
                <h3>Security & Authorization Framework</h3>
                <div class="security-grid">
                    <div class="security-item">
                        <h4>JWT Authentication</h4>
                        <p>Token-based authentication with access and refresh tokens</p>
                    </div>
                    <div class="security-item">
                        <h4>Casbin RBAC</h4>
                        <p>Role-based access control with domain-specific permissions</p>
                    </div>
                    <div class="security-item">
                        <h4>Password Hashing</h4>
                        <p>Secure password storage using bcrypt</p>
                    </div>
                    <div class="security-item">
                        <h4>Request Validation</h4>
                        <p>Input sanitization and validation</p>
                    </div>
                </div>
            </div>

            <!-- Request Workflow -->
            <div class="workflow-section">
                <h3>Request Processing Workflow</h3>
                <div class="workflow-grid">
                    <div class="workflow">
                        <h3>Authentication Flow</h3>
                        <ol>
                            <li>Client sends credentials to /login endpoint</li>
                            <li>Service validates credentials against database</li>
                            <li>JWT access and refresh tokens generated</li>
                            <li>Tokens cached in Redis with expiration</li>
                            <li>Response includes tokens and user information</li>
                        </ol>
                    </div>
                    <div class="workflow">
                        <h3>Protected Resource Access</h3>
                        <ol>
                            <li>Client includes JWT token in Authorization header</li>
                            <li>JWT middleware validates token signature</li>
                            <li>Claims authorization middleware extracts user info</li>
                            <li>Casbin middleware checks resource permissions</li>
                            <li>Handler processes request and returns response</li>
                        </ol>
                    </div>
                </div>
            </div>

            <!-- Data Flow -->
            <div class="data-flow">
                <h3>Data Flow Architecture</h3>
                <div class="flow-diagram">
                    <div class="flow-step">Client<br>Request</div>
                    <div class="flow-step">Echo<br>Router</div>
                    <div class="flow-step">Middleware<br>Chain</div>
                    <div class="flow-step">Handler</div>
                    <div class="flow-step">Service</div>
                    <div class="flow-step">Database</div>
                </div>
            </div>

            <!-- Libraries & Dependencies -->
            <div class="libraries-section">
                <h3>Core Libraries & Dependencies</h3>
                <div class="libraries-grid">
                    <div class="library-category">
                        <h4>Web Framework</h4>
                        <div class="library-item">
                            <strong>Echo v4</strong><br>
                            <span>High-performance HTTP web framework</span>
                        </div>
                        <div class="library-item">
                            <strong>Echo-JWT</strong><br>
                            <span>JWT middleware for Echo framework</span>
                        </div>
                    </div>

                    <div class="library-category">
                        <h4>Database & ORM</h4>
                        <div class="library-item">
                            <strong>GORM v1.30</strong><br>
                            <span>Object-Relational Mapping library</span>
                        </div>
                        <div class="library-item">
                            <strong>MySQL/PostgreSQL Drivers</strong><br>
                            <span>Database connectivity drivers</span>
                        </div>
                        <div class="library-item">
                            <strong>Redis v9</strong><br>
                            <span>In-memory data structure store</span>
                        </div>
                    </div>

                    <div class="library-category">
                        <h4>Authentication & Security</h4>
                        <div class="library-item">
                            <strong>JWT v5</strong><br>
                            <span>JSON Web Token implementation</span>
                        </div>
                        <div class="library-item">
                            <strong>Casbin v2</strong><br>
                            <span>Authorization library with RBAC support</span>
                        </div>
                        <div class="library-item">
                            <strong>Ozzo-Validation</strong><br>
                            <span>Request validation library</span>
                        </div>
                    </div>

                    <div class="library-category">
                        <h4>CLI & Configuration</h4>
                        <div class="library-item">
                            <strong>Cobra</strong><br>
                            <span>CLI application framework</span>
                        </div>
                        <div class="library-item">
                            <strong>Godotenv</strong><br>
                            <span>Environment variable management</span>
                        </div>
                        <div class="library-item">
                            <strong>Zerolog</strong><br>
                            <span>Structured logging library</span>
                        </div>
                    </div>

                    <div class="library-category">
                        <h4>Documentation</h4>
                        <div class="library-item">
                            <strong>Swaggo/Swag</strong><br>
                            <span>Swagger documentation generator</span>
                        </div>
                        <div class="library-item">
                            <strong>Swagger UI</strong><br>
                            <span>Interactive API documentation</span>
                        </div>
                    </div>

                    <div class="library-category">
                        <h4>Utilities</h4>
                        <div class="library-item">
                            <strong>UUID</strong><br>
                            <span>UUID generation and management</span>
                        </div>
                        <div class="library-item">
                            <strong>Gofakeit</strong><br>
                            <span>Data generation for testing</span>
                        </div>
                        <div class="library-item">
                            <strong>Golang Crypto</strong><br>
                            <span>Cryptographic functions</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
